/**
 * NGX - extension library for AngularJS
 * @version v0.0.1 - 2012-08-24
 * @link http://github.com/lmc-eu/ngx-library
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
(function(a,b){"use strict";var c=null,d=/ngx(\.min)?\.js(.*)$/;a.forEach(b.getElementsByTagName("script"),function(a){a.src.match(d)&&(c=a.src.replace(d,""))});if(c===null)throw new Error("ngx base path cannot be determined.");var e=a.module("ngx",[]);e.value("ngxConfig",{basePath:c,libsPath:c+"libs/",templatesPath:c+"templates/"})})(window.angular,window.document),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1}),function(a){"use strict";var b={};b.format=function(a,b){var c=this,d,e,f=/\\?([a-z])/gi,g,h=function(a,b){return(a=a+"").length<b?(new Array(++b-a.length)).join("0")+a:a},i=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December"];return g=function(a,b){return e[a]?e[a]():b},e={d:function(){return h(e.j(),2)},D:function(){return e.l().slice(0,3)},j:function(){return d.getDate()},l:function(){return i[e.w()]+"day"},N:function(){return e.w()||7},S:function(){var a=e.j();return a<4||a>20&&["st","nd","rd"][a%10-1]||"th"},w:function(){return d.getDay()},z:function(){var a=new Date(e.Y(),e.n()-1,e.j()),b=new Date(e.Y(),0,1);return Math.round((a-b)/864e5)+1},W:function(){var a=new Date(e.Y(),e.n()-1,e.j()-e.N()+3),b=new Date(a.getFullYear(),0,4);return h(1+Math.round((a-b)/864e5/7),2)},F:function(){return i[6+e.n()]},m:function(){return h(e.n(),2)},M:function(){return e.F().slice(0,3)},n:function(){return d.getMonth()+1},t:function(){return(new Date(e.Y(),e.n(),0)).getDate()},L:function(){var a=e.Y();return a%4===0&&a%100!==0||a%400===0},o:function(){var a=e.n(),b=e.W(),c=e.Y();return c+(a===12&&b<9?-1:a===1&&b>9)},Y:function(){return d.getFullYear()},y:function(){return(e.Y()+"").slice(-2)},a:function(){return d.getHours()>11?"pm":"am"},A:function(){return e.a().toUpperCase()},B:function(){var a=d.getUTCHours()*3600,b=d.getUTCMinutes()*60,c=d.getUTCSeconds();return h(Math.floor((a+b+c+3600)/86.4)%1e3,3)},g:function(){return e.G()%12||12},G:function(){return d.getHours()},h:function(){return h(e.g(),2)},H:function(){return h(e.G(),2)},i:function(){return h(d.getMinutes(),2)},s:function(){return h(d.getSeconds(),2)},u:function(){return h(d.getMilliseconds()*1e3,6)},e:function(){throw"Not supported (see source code of date() for timezone on how to add support)"},I:function(){var a=new Date(e.Y(),0),b=Date.UTC(e.Y(),0),c=new Date(e.Y(),6),d=Date.UTC(e.Y(),6);return 0+(a-b!==c-d)},O:function(){var a=d.getTimezoneOffset(),b=Math.abs(a);return(a>0?"-":"+")+h(Math.floor(b/60)*100+b%60,4)},P:function(){var a=e.O();return a.substr(0,3)+":"+a.substr(3,2)},T:function(){return"UTC"},Z:function(){return-d.getTimezoneOffset()*60},c:function(){return"Y-m-d\\Th:i:sP".replace(f,g)},r:function(){return"D, d M Y H:i:s O".replace(f,g)},U:function(){return parseInt(d/1e3,10)}},this.date=function(a,b){return c=this,d=b===null?new Date:b instanceof Date?new Date(b):new Date(b*1e3),a.replace(f,g)},this.date(a,b)},b.check=function(a,b,c){return a>0&&a<13&&c>0&&c<32768&&b>0&&b<=(new Date(c,a,0)).getDate()},a.module("ngx.date",["ngx"]).value("ngxDate",b)}(window.angular),function(a,b){function q(a){if(a._done)return;a(),a._done=1}function r(a){var b=a.split("/"),c=b[b.length-1],d=c.indexOf("?");return d!=-1?c.substring(0,d):c}function s(a){var b;if(typeof a=="object")for(var c in a)a[c]&&(b={name:c,url:a[c]});else b={name:r(a),url:a};var d=i[b.name];return d&&d.url===b.url?d:(i[b.name]=b,b)}function t(a,b){if(!a)return;typeof a=="object"&&(a=[].slice.call(a));for(var c=0;c<a.length;c++)b.call(a,a[c],c)}function u(a){return Object.prototype.toString.call(a)=="[object Function]"}function v(a){a=a||i;var b;for(var c in a){if(a.hasOwnProperty(c)&&a[c].state!=p)return!1;b=!0}return b}function w(a){a.state=m,t(a.onpreload,function(a){a.call()})}function x(a,b){a.state===undefined&&(a.state=n,a.onpreload=[],z({src:a.url,type:"cache"},function(){w(a)}))}function y(a,b){if(a.state==p)return b&&b();if(a.state==o)return l.ready(a.name,b);if(a.state==n)return a.onpreload.push(function(){y(a,b)});a.state=o,z(a.url,function(){a.state=p,b&&b(),t(h[a.name],function(a){q(a)}),v()&&e&&t(h.ALL,function(a){q(a)})})}function z(b,d){var e=a.createElement("script");e.type="text/"+(b.type||"javascript"),e.src=b.src||b,e.async=!1,e.onreadystatechange=e.onload=function(){var a=e.readyState;!d.done&&(!a||/loaded|complete/.test(a))&&(d.done=!0,d())},(a.body||c).appendChild(e)}function A(){e||(e=!0,t(f,function(a){q(a)}))}"use strict";var c=a.documentElement,d,e,f=[],g=[],h={},i={},j=a.createElement("script").async===!0||"MozAppearance"in a.documentElement.style||b.opera,k=b.head_conf&&b.head_conf.head||"head",l=b[k]=b[k]||function(){l.ready.apply(null,arguments)},m=1,n=2,o=3,p=4;j?l.js=function(){var a=arguments,b=a[a.length-1],c={};return u(b)||(b=null),t(a,function(d,e){d!=b&&(d=s(d),c[d.name]=d,y(d,b&&e==a.length-2?function(){v(c)&&q(b)}:null))}),l}:l.js=function(){var a=arguments,b=[].slice.call(a,1),c=b[0];return d?(c?(t(b,function(a){u(a)||x(s(a))}),y(s(a[0]),u(c)?c:function(){l.js.apply(null,b)})):y(s(a[0])),l):(g.push(function(){l.js.apply(null,a)}),l)},l.ready=function(b,c){if(b==a)return e?q(c):f.push(c),l;u(b)&&(c=b,b="ALL");if(typeof b!="string"||!u(c))return l;var d=i[b];if(d&&d.state==p||b=="ALL"&&v()&&e)return q(c),l;var g=h[b];return g?g.push(c):g=h[b]=[c],l},l.ready(a,function(){v()&&t(h.ALL,function(a){q(a)}),l.feature&&l.feature("domloaded",!0)});if(b.addEventListener)a.addEventListener("DOMContentLoaded",A,!1),b.addEventListener("load",A,!1);else if(b.attachEvent){a.attachEvent("onreadystatechange",function(){a.readyState==="complete"&&A()});var B=1;try{B=b.frameElement}catch(C){}!B&&c.doScroll&&function(){try{c.doScroll("left"),A()}catch(a){var d=arguments;b.setTimeout(d.callee,1);return}}(),b.attachEvent("onload",A)}if(!a.readyState&&a.addEventListener){var D;a.readyState="loading",a.addEventListener("DOMContentLoaded",D=function(){a.removeEventListener("DOMContentLoaded",D,!1),a.readyState="complete"},!1)}b.setTimeout(function(){d=!0,t(g,function(a){a()})},300)}(window.document,window),function(a,b){"use strict";var c=a.module("ngx.loader",["ngx"]);c.factory("ngxLoader",["ngxConfig",function(c){var d=[];return function(e,f){var g=[],h=[];a.forEach(typeof e=="string"?[e]:e,function(a){a.match(/^(\/|http)/)||(a=c.basePath+a);if(d.indexOf(a)!==-1)return;if(a.match(/\.css$/i))h.push(a);else if(a.match(/\.js$/i))g.push(a);else throw new Error("File type not supported")}),g.length?(b.js.apply(this,g),b.ready(f)):f(),h.length&&a.forEach(h,function(b){a.element("head").append(a.element('<link rel="stylesheet" type="text/css" href="'+b+'"></link>'))})}}])}(window.angular,window.head),function(a,b,c){"use strict";var d=a.module("ngx.smap",[]);d.config(function(){c.console.DEBUG=!0}),d.factory("ngxSmap",function(){function e(e){function n(a){return typeof a=="object"?a.toWGS84?a:d.Coords.fromWGS84(a.lon!==undefined?a.lon:a[0],a.lon!==undefined?a.lat:a[1]):typeof a=="string"?(a=a.split(","),n({lat:a[0],lon:a[1]})):undefined}var f,g,h,i,j=this,k={coords:{},query:{}},l={stre:"street",addr:"number",muni:"city",dist:"district",regi:"region",ward:"ward",coun:"country",base:"base",firm:"firm"},m={street:"^ulice ",number:"^č\\.p\\. ",city:"^obec ",district:"^okres ",region:"^(kraj( Hlavní město)?|provincie) ",ward:"^(čtvrť|část obce) "};this.create=function(a){f=new d(e),f.addDefaultLayer(d.DEF_BASE).enable(),a||(a={}),a.controls!=="off"&&f.addDefaultControls(),g=new d.Card(230),b(g.getBody()).css("padding-right","18px"),h=new d.Layer.Marker,f.addLayer(h),h.enable(),f.getSignals().addListener(c,"map-click",function(a){b(j).triggerHandler("click",[d.Coords.fromEvent(a.data.event,f)])})},this.geocodeQuery=function(b,c){k.query[b]?c(k.query[b]):(i&&i.abort(),i=new d.Geocoder(b,function(d){var e=d.getResults();e=e[0]&&e[0].results&&e[0].results.length?e[0].results:[],a.forEach(e,function(a,b){e[b].type=l[a.source],e[b].coords=j.formatCoords(a.coords)}),k.query[b]=e,c(e)}))},this.geocodeCoords=function(c,e){function f(a){e&&e(a),b(j).triggerHandler("geocodeCoords",[a])}c=n(c);var g=c.x+"-"+c.y;if(k.coords[g]){f(k.coords[g]);return}var h=new d.Geocoder.Reverse(c,function(b){var c=b.getResults(),d=c.coords.toWGS84(),e={coords:j.formatCoords(d),label:c.label,meta:{}},h,i;a.forEach(c.items,function(a){h=l[a.type];if(!h)return;i=a.name,m[h]&&(i=i.replace(new RegExp(m[h],"i"),"")),e[h]=i,e.meta[h]={id:a.id,coords:j.formatCoords(a.coords)};switch(h){case"number":var b=i.split("/");e.registry_number=b[0],e.house_number=b[1]?b[1]:undefined;break;case"city":try{var d=(new RegExp(", ([0-9]{3}) ([0-9]{2}) "+i)).exec(c.label);d&&(e.zip_code=d[1]+" "+d[2])}catch(f){}}}),!e.street&&e.ward&&(e.street=e.ward),k.coords[g]=e,f(e)})},this.setCenter=function(a,b){if(!a)return;a=n(a),b.zoom?f.setCenterZoom(a,b.zoom===!0?15:b.zoom):f.setCenter(a),b.marker&&(h.removeAll(),h.addMarker(new d.Marker(a,"marker"))),b.card&&(f.addCard(g,a),g.getBody().innerHTML=b.card)},this.formatLabel=function(a,b){if(b.source==="firm"||b.source==="addr"){var c=(a.street?a.street:a.ward)+" "+a.number;return a.city&&(c+=", "+(a.zip_code?a.zip_code+" ":"")+a.city),a.country&&(c+=", "+a.country),c}return b.label},this.formatCoords=function(a){var b=n(a).toWGS84();return{lon:b[0],lat:b[1]}}}var d=c.SMap;if(d===undefined)throw"Seznam map API is not loaded, see http://api4.mapy.cz/view?page=instruction";return function(a){return new e(a)}})}(window.angular,window.jQuery,window),function(a,b,c){"use strict";var d=a.module("ngx.ui.addressInput",["ngx.ui.smap"]);d.directive("ngxAddressInput",["$timeout","ngxSmap",function(d,e){return{require:"ngModel",compile:function(f,g){var h=a.isDefined(g.geomap);return function(f,g,i,j){function m(a){if(k===a)return;k=a,j.$setValidity("number",!k),n(!0),g.autocomplete("close"),k||d(function(){g.autocomplete("search")},0)}function n(b,c){j.$setValidity("found",a.isNumber(b)?b>0:b),j.$setValidity("found_number",a.isDefined(c)?a.isNumber(c)?c>0:c:b)}function o(a){j.loading=a}function p(a){l=a,b(l).bind("geocodeCoords",function(a,b){d(function(){j.$setViewValue(b)},0)})}function q(c,d){o(!0),a.isUndefined(d)&&(d={source:"addr"}),l.geocodeCoords(c,function(a){a.label=l.formatLabel(a,d),b(i.geomap).is(":visible")&&l.setCenter(a.coords,{zoom:!0,card:a.label}),o(!1),n(!0)})}var k,l;j.$parsers.push(function(b){var c;if(a.isObject(b))c=b,i.ngxAddressMeta!=="true"&&delete c.meta,g.val(b.label);else if(a.isString(b)||a.isUndefined(b))c=k?undefined:{label:b};else throw"Invalid address data";return k&&j.$setValidity("number",c&&c.number?!0:!1),c}),j.$formatters.push(function(b){return a.isObject(b)?(b.coords&&q(b.coords),a.isString(b.label)?b.label:""):""}),m(!0),i.ngxAddressStrict&&f.$watch(i.ngxAddressStrict,function(a){m(a)}),j.loading=!1,h?i.$observe("geomap",function(b){p(a.element(b).data("ngx.ui.geomap"))}):p(e()),g.autocomplete({delay:500,source:function(b,c){o(!0),f.$apply(),l.geocodeQuery(b.term,function(b){var d=[],e=b.length;a.forEach(b,function(a){if(k&&a.type!=="number")return;if(!k&&a.label.match(/Česká republika/))return;(a.type==="street"||a.type==="city"||a.type==="number"||a.type==="country")&&d.push(a)}),k&&n(e,d.length),c(d),o(!1),f.$apply()})},select:function(a,b){return q(b.item.coords,b.item),f.$apply(),!1}}),b(c).click(function(){g.autocomplete("close")})}}}}])}(window.angular,window.jQuery,window),function(a){"use strict";var b=a.module("ngx.ui.checkboxlist",["ngx"]);b.directive("ngxCheckboxlist",["$interpolate",function(b){var c={};return{require:"ngModel",link:function(d,e,f,g){var h=f.ngModel,i=f.ngxCheckboxlistRequired?!0:!1,j=parseInt(f.ngxCheckboxlistMin,10);g.value=b(e.val())(d),c[h]||(c[h]={ctrl:[],list:{}}),c[h].ctrl.push(g),c[h].list[g.value]=f.title,g.list=c[h].list,g.$parsers.push(function(){var b=[];return a.forEach(c[h].ctrl,function(a){a.$viewValue&&b.push(a.value)}),g.$setValidity("required",i?b.length>0:!0),g.$setValidity("min",b.length>=j),b}),g.$formatters.push(function(a){a||(a=[]),g.$setValidity("required",i?a.length>0:!0),g.$setValidity("min",a.length>=j);for(var b=0;b<a.length;b++)if(a[b]===g.value)return!0;return!1})}}}])}(window.angular),window.CKEDITOR_BASEPATH="",function(a,b){"use strict";var c=a.module("ngx.ui.ckeditor",["ngx.loader"]);c.directive("ngxCkeditor",["$parse","ngxConfig","ngxLoader",function(c,d,e){b.CKEDITOR_BASEPATH=d.libsPath+"ckeditor/";var f=[b.CKEDITOR_BASEPATH+"ckeditor.js"];return{restrict:"A",require:"ngModel",link:function(d,g,h,i){g.hide(),e(f,function(){g.show();var e=b.CKEDITOR.replace(g[0],{toolbar:[["Bold","BulletedList","Link"]],toolbarLocation:"bottom",toolbarCanCollapse:!1,removePlugins:"elementspath",extraPlugins:"autogrow",autoGrow_onStartup:!0,autoGrow_minHeight:150,resize_enabled:!1,forcePasteAsPlainText:!0,linkShowAdvancedTab:!1,linkShowTargetTab:!1,entities:!1},g.val());e.on("contentDom",function(){function b(){var a=e.getData().replace(/<p>\n\t/gi,"<p>").replace(/\n$/,"");c(h.ngModel).assign(d,a),d.$apply()}a.forEach(["focus","blur"],function(a){e.on(a,function(){g.triggerHandler(a)})}),e.document.on("keyup",b),e.on("focus",b),e.on("blur",b),e.on("afterCommandExec",b)}),i.$parsers.push(function(a){e.setData(a)})})}}}])}(window.angular,window),function(a,b){"use strict";var c=a.module("ngx.ui.dateInput",["ngx.date"]);c.directive("ngxDateInput",["$parse","ngxDate",function(a,c){return{require:"ngModel",link:function(d,e,f,g){e=b(e),e.datepicker({dateFormat:"d.m.yy",firstDay:1,showButtonPanel:!1,showMinute:!1,closeText:"Zavřít",prevText:"Předchozí",nextText:"Další",currentText:"Nyní",monthNames:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],dayNamesMin:["Ne","Po","Út","St","Čt","Pá","So"],onSelect:function(a){d.$apply(function(){g.$setViewValue(a)})}}),g.element=e,f.ngxDateRangeInput?(g.range={type:"max",ctrl:a(f.ngxDateRangeInput)(d)},g.range.ctrl.range={type:"min",ctrl:g}):g.range=null,g.$parsers.push(function(a){var b,d=!0;if(a&&g.$dirty){var e=(new RegExp("^([0-9]{1,2}). ?([0-9]{1,2}). ?([0-9]{4})")).exec(a);d=e&&c.check(e[2],e[1],e[3]);if(d){b=new Date(e[3],e[2]-1,e[1]);if(g.timeInput)if(g.timeInput.$valid){var f=g.timeInput.hours,h=g.timeInput.minutes;g.range&&g.range.type==="max"&&f===undefined&&(f=23,h=59),f!==undefined&&(b.setHours(f),b.setMinutes(h))}else d=!1}}var i=b&&d?c.format("Y-m-d",b):undefined;g.timestampValue=b&&d?b.getTime()/1e3:undefined,g.$setValidity("date",d);if(g.range){g.$error.date||g.range.ctrl.element.datepicker("option",g.range.type+"Date",a);var j=g.range.type==="min"?g.timestampValue:g.range.ctrl.timestampValue,k=g.range.type==="max"?g.timestampValue:g.range.ctrl.timestampValue;d=j&&k?j<=k:!0,g.$setValidity("range",d),g.range.ctrl.$setValidity("range",d)}return i})}}}])}(window.angular,window.jQuery),function(a,b){"use strict";var c=a.module("ngx.ui.dialog",["ngx"]);c.directive("ngxDialog",["$timeout","$rootScope",function(a,c){return{restrict:"EA",controller:["$scope","$element",function(a,b){this.close=function(){b.dialog("close")}}],link:function(d,e,f,g){e.addClass("ngx-dialog").css("display","block").hide();var h={autoOpen:!1,width:f.width?f.width:"auto",height:f.height?f.height:"auto",modal:f.modal?!0:!1,title:f.title,resizable:!1};e.dialog(h),b(f.trigger).click(function(a){return a.preventDefault(),e.dialog("open"),!1}),f.title===undefined&&f.$observe("title",function(a){e.dialog("option","title",a)}),f.onclose&&e.dialog("option","close",function(){a(function(){d.$eval(f.onclose)},0)}),c.$on("$routeChangeSuccess",function(){g.close()})}}}]),c.directive("ngxDialogButton",["$parse",function(a){return{require:"^ngxDialog",link:function(b,c,d,e){c.addClass("ngx-dialog-button");var f=d.ngxDialogButton;c.bind("click",function(c){return f==="@close"?e.close():b.$apply(function(){a(f)(b,{$dialog:e})}),c.preventDefault(),!1})}}}])}(window.angular,window.jQuery),function(a,b){"use strict";var c=a.module("ngx.ui.gallery",["ngx.ui.lightbox"]);c.directive("ngxGallery",["$timeout","ngxConfig",function(c,d){return{restrict:"EA",replace:!0,templateUrl:d.templatesPath+"ui/gallery/gallery.html",transclude:!0,controller:["$scope",function(b){a.isArray(b.items)||(b.items=[]),this.add=function(a,c){c.type=a,b.items.push(c)}}],scope:{items:"=ngxGallery"},link:function(a,d){a.src=function(a){return a.thumbSrc?a.thumbSrc:a.src},b(d).find("div[ng-transclude]").remove(),c(function(){d.triggerHandler("link",[d])},0)}}}]),c.directive("ngxGalleryItem",function(){return{restrict:"EA",require:"^ngxGallery",replace:!0,link:function(b,c,d,e){var f={};a.forEach(["src","thumbSrc","title"],function(a){d[a]&&(f[a]=d[a])}),e.add(d.type?d.type:"image",f)}}}),c.directive("ngxGalleryToggle",function(){return{replace:!0,template:'<a class="ngx-gallery-toggle" ng-click="toggle()" ng-transclude></a>',transclude:!0,link:function(a,c,d){var e,f;b(d.ngxGalleryToggle).bind("link",function(a,b){e=b.css("max-height",b.height()).addClass("collapsed")}),a.toggle=function(){e.toggleClass("collapsed"),f=c.html(),c.html(d.toggleText),d.$set("toggleText",f)}}}})}(window.angular,window.jQuery),function(a){"use strict";var b=a.module("ngx.ui.geomap",["ngx.ui.smap"]);b.directive("ngxGeomap",["$compile",function(a){return{link:function(b,c,d){d.$set("ngxGeomap",undefined),d.$set("ngxSmap",""),a(c)(b)}}}])}(window.angular),function(a){"use strict";var b=a.module("ngx.ui.hashtagInput",["ngx"]);b.directive("ngxHashtagInput",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){return a===""||a==="#"||typeof a!="string"?a="":a="#"+a.replace(/^([#]+)/,""),b.val(a),d.$setValidity("hashtag",!a||!a.substring(1).match(/(\s|#)/)),a})}}})}(window.angular),function(a,b,c){function e(a,b,c,d){var e=[1];return a>b&&e.push(b/a),c>d&&e.push(d/c),e.sort(),e[0]}"use strict";var d=a.module("ngx.ui.imageupload",["ngx.loader"]);d.directive("ngxImageupload",["$timeout","ngxConfig","ngxLoader",function(d,f,g){var h=[f.libsPath+"jquery.jcrop/jquery.Jcrop.js",f.libsPath+"jquery.jcrop/jquery.Jcrop.css",f.libsPath+"jquery.fileupload/jquery.fileupload.js",f.libsPath+"jquery.iframe-transport/jquery.iframe-transport.js"];return{restrict:"E",replace:!0,require:"ngModel",templateUrl:f.templatesPath+"ui/imageupload/imageupload.html",scope:{model:"=ngModel",config:"="},link:function(f,i,j){function t(){o=undefined,f.isSource=!1}function u(a){var c=b(a),d=c.data("width")?c.data("width"):a.width,g=c.data("height")?c.data("height"):a.height;f.isSource=a?!0:!1,c.css({"max-width":k[0]+"px","max-height":k[1]+"px"}).show();if(s.crop){var h=e(d,k[0],g,k[1]),i={setSelect:[0,0,n[0],n[1]],bgColor:"transparent",onSelect:function(c){function d(b,d,f,g){if(!q){var h=e(c.w,d,c.h,f);d=Math.floor(c.w*h),f=Math.floor(c.h*h)}return b.width=d,b.height=f,g&&(g.width=d,g.height=f),b.getContext("2d").drawImage(a,c.x,c.y,c.w-1,c.h-1,0,0,d,f),b.toDataURL(r,.9)}c.x=Math.floor(c.x/h),c.y=Math.floor(c.y/h),c.w=Math.floor(c.w/h),c.h=Math.floor(c.h/h),o={},o.src=d(p,n[0],n[1],o),l&&(o.thumbSrc=d(m,l[0],l[1])),b("[data-imageupload-rel=result]").attr(o)}};q&&(i.aspectRatio=n[0]/n[1]);var j=c.data("Jcrop");j&&j.destroy(),c.Jcrop(i,function(){i.onSelect(this.tellSelect())})}else o={width:d,height:g,src:c.attr("src")}}function v(){var d=b(i),e=a.extend({},f.config,j);k=(e.sourceScale||j.sourceScale||"400x400").split("x"),n=(e.resultScale||"215x125").split("x"),q=!a.isUndefined(e.resultFixed),r="image/"+((e.resultFormat||"").match(/^jpe?g$/)?"jpeg":"png"),l=e.resultThumbScale||undefined,l&&(l=l.split("x")),t(),d.find(".source").css({width:k[0]+"px",height:k[1]+"px"}),d.find(".result").css({width:n[0]+"px",height:n[1]+"px"}),f.features=s,f.featureClass=[],a.forEach(["crop","fileApi"],function(a){f.featureClass.push(s[a]?a:"no-"+a.toLowerCase())}),f.featureClass=f.featureClass.join(" "),j.dialogTrigger&&(b(j.dialogTrigger).click(function(a){return a.preventDefault(),d.dialog("open"),!1}),d.dialog({autoOpen:!1,minWidth:parseInt(k[0],10)+parseInt(n[0],10)+70,minHeight:parseInt(k[1]>n[1]?k[1]:n[1],10)+50,resizable:!1,title:j.dialogTitle,buttons:{"Zrušit":function(){t(),f.$apply(),b(this).dialog("close")},"Nahrát":function(){f.model=j.resultMode==="simple"?o.src:o,t(),f.$apply(),b(this).dialog("close")}}})),d.fileupload({url:j.sourceContentUrl,fileInput:d.find("input[type=file]"),dropZone:b("[data-imageupload-rel=dragdrop]"),dataType:"json",replaceFileInput:!0,formData:{crop:s.crop?"true":"false"},add:function(a,d){var e=d.files[0],g=b("[data-imageupload-rel=source]")[0];b(g).hide(),g.onload=function(){u(this),f.$apply()},g.onerror=function(){c.alert("Neplatný obrázek")};if(s.fileApi){var h=new c.FileReader;h.onload=function(a){g.src=a.target.result},h.readAsDataURL(e)}else d.submit().success(function(a){b(g).data("width",a.width).data("height",a.height),g.src=a.source}).error(function(){c.alert("Chyba při zpracování obrázku anebo neplatný obrázek")})}})}var k,l,m=b("<canvas/>")[0],n,o,p=b("<canvas/>")[0],q,r,s={crop:p.getContext?!0:!1,fileApi:typeof c.FileReader!="undefined"};i.hide(),g(h,function(){i.show(),d(v,0)})}}}])}(window.angular,window.jQuery,window),document.createElement("ngx-invalid"),function(a){"use strict";var b=a.module("ngx.ui.invalid",["ngx"]);b.directive("ngxInvalid",function(){return{restrict:"EA",link:function(b,c,d){c.addClass("ngx-invalid");var e=d.ngxInvalid?d.ngxInvalid.split(" "):[],f=d.input?d.input:e[0],g=d.error?d.error:e[1],h=[];g?a.forEach(g.split(","),function(a){h.push(f+".$error."+a)}):h.push(f+".$invalid"),h=[h.length>1?"("+h.join(" || ")+")":h[0]],d.ngShow&&h.push(d.ngShow),d.expression&&h.push(d.expression),b.$watch(h.join(" && "),function(a){c.toggle(a?!0:!1)})}}})}(window.angular),function(a,b){"use strict";var c=a.module("ngx.ui.lightbox",["ngx.loader"]);c.directive("ngxLightbox",["ngxConfig","ngxLoader",function(c,d){var e=[c.libsPath+"jquery.fancybox/jquery.fancybox.js",c.libsPath+"jquery.fancybox/css/fancybox.css"];return{link:function(c,f,g){g.ngxLightbox&&f.attr("rel",g.ngxLightbox),d(e,function(){b(f).fancybox({onStart:function(c,d,e){var f={height:"100%",bottom:0};return a.extend(e,{href:g.href||g.src,title:g.title,titlePosition:"inside",speedIn:150,speedOut:150}),e.href.match(/youtube\.com/)?(a.extend(e,{type:"swf",href:g.href+"?autoplay=1&fs=1",width:661,height:481,swf:{wmode:"transparent",allowfullscreen:!0}}),a.extend(f,{height:"40%",bottom:"30%"})):e.href.match(/(jpg|png|gif|bmp)$/)||e.href.match(/^data:image\//)?e.type="image":a.extend(e,{type:"iframe",width:"90%",height:"95%"}),a.forEach(["width","height","title","type"],function(a){g[a]&&(e[a]=g[a])}),b("#fancybox-left").css(f),b("#fancybox-right").css(f),e}})})}}}])}(window.angular,window.jQuery),function(a,b){"use strict";var c=a.module("ngx.ui.scrollTo",["ngx"]);c.directive("ngxScrollTo",function(){return function(a,c,d){c.bind("click",function(a){return a.preventDefault(),b("html, body").animate({scrollTop:b(d.ngxScrollTo).offset().top+(d.scrollOffset?parseInt(d.scrollOffset,10):0)},600),!1})}})}(window.angular,window.jQuery),function(a){"use strict";var b=a.module("ngx.ui.smap",["ngx.smap"]);b.directive("ngxSmap",["ngxSmap",function(a){return{link:function(b,c,d){function f(a){e.setCenter(a,{zoom:!0,marker:!0})}c.addClass("ngx-smap");var e=a(c[0]);e.create({controls:d.controls}),c.data("ngx.ui.geomap",e),d.$observe("coords",function(a){a&&f(a)})}}}])}(window.angular),function(a,b){"use strict";var c=a.module("ngx.ui.tagsInput",["ngx.loader"]);c.directive("ngxTagsInput",["$http","$filter","$timeout","ngxConfig","ngxLoader",function(c,d,e,f,g){var h=[f.libsPath+"jquery.tagsinput/jquery.tagsinput.js",f.libsPath+"jquery.tagsinput/jquery.tagsinput.css"],i=0;return{require:"ngModel",link:function(f,j,k,l){var m=parseInt(k.ngxTagsMaxCount?k.ngxTagsMaxCount:k.ngxTags,10);j=b(j),k.id||k.$set("id","tags_input_"+i++);var n=k.ngxTagsAutocompleteUrl?{url:k.ngxTagsAutocompleteUrl,data:undefined,source:function(a,b){n.data===undefined?c.get(n.url).success(function(c){n.data=c,b(n.filter(a.term))}):b(n.filter(a.term))},filter:function(a){return d("filter")(n.data,a)}}:null;g(h,function(){j.tagsInput({autocomplete_url:n?n.url:undefined,autocomplete:n&&n.url?{source:n.source,minLength:2}:undefined,maxChars:30,maxCount:parseInt(m,10),width:null,height:null,defaultText:"",onChange:function(a){var c=j.data("ngx.tagsInput.onchange");c&&c(b(a).val())}});var c=b("#"+k.id+"_tag");a.forEach(["focus","blur"],function(a){c.bind(a,function(){j.triggerHandler(a,[this])})}),l.$parsers.push(function(a){if(typeof a=="string"&&a.length){var b=a.split(",");return m&&l.$setValidity("max_count",b.length<=m),b}return undefined}),l.$render=function(){l.$modelValue&&j.importTags(l.$modelValue.join(","))},j.data("ngx.tagsInput.onchange",function(a){e(function(){l.$setViewValue(a)},0)})})}}}])}(window.angular,window.jQuery),function(a){"use strict";var b=a.module("ngx.ui.timeInput",["ngx"]);b.directive("ngxTimeInput",["$parse",function(a){return{require:"ngModel",link:function(b,c,d,e){var f;d.ngxTimeDateInput&&(f=a(d.ngxTimeDateInput)(b),f.timeInput=e);var g=[];for(var h=0;h<=23;h++)for(var i=0;i<=59;i=i+15)g.push((h<10?"0"+h:h)+":"+(i<10?"0"+i:i));c.autocomplete({source:g,minLength:0,delay:0,open:function(){c.autocomplete("widget").css("width","60px")},select:function(a,c){b.$apply(function(){e.$setViewValue(c.item.value)})}}).focus(function(){c.autocomplete("search",c.val())}),e.$parsers.push(function(a){e.hours=undefined,e.minutes=undefined;var b=!0;if(a&&a.length){var c=(new RegExp("([0-9]{1,2}):([0-9]{2})$")).exec(a);b=c&&c[1]>=0&&c[1]<=23&&c[2]>=0&&c[2]<=59,b&&(e.hours=parseInt(c[1],10),e.minutes=parseInt(c[2],10))}return e.$setValidity("time",b),f&&f.$setViewValue(f.$viewValue),a})}}}])}(window.angular),function(a,b){"use strict";var c=a.module("ngx.ui.tooltip",["ngx"]);c.directive("ngxTooltip",function(){return{restrict:"EA",replace:!0,transclude:!0,template:'<div class="ngx-tooltip" ng-transclude><span class="arrow"><span></span></span></div>',link:function(a,c,d){if(d.ngxTooltip)return;(d.element?b(d.element):c.prevAll("input,select,textarea")).bind({focus:function(a,d){if(d&&b(d).is(":disabled"))return;c.show()},blur:function(){c.hide()}}),c.hide()}}})}(window.angular,window.jQuery),function(a){"use strict";var b=a.module("ngx.ui.wwwInput",["ngx"]);b.directive("ngxWwwInput",function(){var a=/https?:\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,b=/^https?:\/\//;return{require:"ngModel",link:function(c,d,e,f){function g(c){var d=c!==undefined&&c.length?b.test(c)?c:"http://"+c:undefined,e=!(d&&d.length&&!a.test(d));return f.$setValidity("www",e),e?d:c}f.$parsers.push(g),f.$render=function(){f.$setViewValue(f.$viewValue),d.val(f.$modelValue)}}}})}(window.angular),function(a){"use strict";var b=a.module("ngx.ui.wysiwyg",["ngx.ui.ckeditor"]);b.directive("ngxWysiwyg",["$compile",function(a){return{require:"ngModel",link:function(b,c,d){d.$set("ngxWysiwyg",undefined),d.$set("ngxCkeditor",""),a(c)(b)}}}])}(window.angular);